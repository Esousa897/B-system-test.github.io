<?php
/* -------------------------------------------------
 *  dashboard.php â€“ BOLDYASE Portaal (gefixte versie)
 * ------------------------------------------------- */

declare(strict_types=1);

ini_set('display_errors', '1');
ini_set('display_startup_errors', '1');
error_reporting(E_ALL);
session_start();

if (empty($_SESSION['user'])) {
    header('Location: login.php');
    exit;
}

/* === CLASSES & CONFIG ===
 * Zet grote class-definities in een apart bestand
 * zodat ze niet in de output komen.
 */
require_once __DIR__ . '/includes/cta_system.php';   // bevat CTAConfig, CTADatabase, enz.

/* Voorbeeld van CTA-instantie (optioneel) */
$cta   = new PremiumCTAGenerator($_SESSION['user']['id'] ?? null);
$test  = new CTATestingEngine($_SESSION['user']['id'] ?? null);
$cfgJS = [
    'PRIMARY_COLORS'   => CTAConfig::PRIMARY_COLORS,
    'SECONDARY_COLORS' => CTAConfig::SECONDARY_COLORS,
    'ANIMATION_TYPES'  => CTAConfig::ANIMATION_TYPES,
    'BORDER_RADIUS'    => CTAConfig::DEFAULT_BORDER_RADIUS,
    'FONT_FAMILY'      => CTAConfig::DEFAULT_FONT_FAMILY,
    'ANIMATION_DELAY'  => CTAConfig::DEFAULT_ANIMATION_DELAY,
    'TOUCH_TARGET'     => CTAConfig::MINIMUM_TOUCH_TARGET,
];
?>
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOLDYASE Portaal</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
<header>
    <h1>BOLDYASE Portaal</h1>
    <nav>
        <a href="index.php">Home</a> |
        <a href="logout.php">Logout</a>
    </nav>
</header>

<main class="dashboard">
    <h2>Welkom, fabrikant</h2>
    <p>Dit is je fabrikant-dashboard. Voeg hier productie-info, status en bestanden toe.</p>

    <!-- Voorbeeld-CTA -->
    <?= $cta->createQuickViewCTA(12345, 'Quick View Test'); ?>

    <ul>
        <li>Status-overzicht (dummy)</li>
        <li>Upload productfoto</li>
        <li>Bekijk claims</li>
    </ul>
</main>

<footer>&copy; <?= date('Y') ?> BOLDYASE.COM</footer>

<!-- Component-JS -->
<script type="module" src="/wordpress/boldyase-site-structuur/assets/js/index.js"></script>

<!-- Config als JavaScript-object -->
<script>
    const CTAConfig = <?= json_encode($cfgJS, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES); ?>;
</script>

<!-- Volledige CTA-runtime (gegenereerd door server) -->
<?= generateCTAJavaScript(); ?>
</body>
</html>